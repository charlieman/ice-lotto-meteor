<template name="lottoPage">
  {{> lottoItem lotto }}

  <div class="content">
    {{#if isAdmin}}
    <div class="form-group pull-right">
      {{#if lotto.closed}}
        <span class="glyphicon glyphicon-lock" aria-hidden="true"></span> <span>Lotto is closed</span>
      {{else}}
        <button type="button" class="closeLotto btn btn-danger">
          <span class="glyphicon glyphicon-lock" aria-hidden="true"></span> Close lotto
        </button>
      {{/if}}

      {{#if lotto.public}}
        <button type="button" class="togglePublic btn btn-danger">
          <span class="glyphicon glyphicon-eye-close" aria-hidden="true"></span> Make private
        </button>
      {{else}}
        <button type="button" class="togglePublic btn btn-success">
          <span class="glyphicon glyphicon-eye-open" aria-hidden="true"></span> Make public
        </button>
      {{/if}}
    </div>
    {{/if}}

    <div class="form-group">
      <label>Small pot:</label> <span>{{ lotto.smallpot }}</span>
    </div>
    <div class="form-group">
      <label>Big pot:</label> <span>{{ lotto.bigpot }}</span>
    </div>
    
    <table class="table table-striped table-bordered">
      <thead>
      {{> tableHeaders }}
      </thead>
      <tbody>
      {{#each tiers}}
        {{> tierRow }}
        {{#if inSession 'SelectedTier' tier}}
          {{#with showEntries ../lotto.entries ../lotto.closed }}
            {{> entriesTable }}
          {{/with}}
        {{/if}}
        {{#if midTier}}
          {{> tableHeaders }}
        {{/if}}
      {{/each}}
      {{> tableHeaders }}
      </tbody>
    </table>
  </div>
</template>

<template name="tableHeaders">
  <tr>
    <th></th>
    {{#each range 1 11 1 }}
      <th>{{ value }}</th>
    {{/each}}
  </tr>
</template>
