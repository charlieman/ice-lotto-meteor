<template name="lottoPage">
  {{> lottoItem}}

  <div class="content">
    <div class="form-group">
      <label>Small pot:</label> <span>{{ smallpot }}</span>
    </div>
    <div class="form-group">
      <label>Big pot:</label> <span>{{ bigpot }}</span>
    </div>
    <table class="table table-striped table-bordered">
      <thead>
        <tr>
          <th></th>
          {{#each range 10 }}
            <th>{{ value }}</th>
          {{/each}}
        </tr>
      </thead>
      <tbody>
      {{#each tiers}}
          {{> tier }}
          {{#if currentTier}}
            {{#with showEntries ../entries }}
              {{> entries }}
            {{/with}}
          {{/if}}
      {{/each}}

      </tbody>
    </table>
  </div>
</template>

<template name="tier">
  <tr>
    <td class="tier">{{tier}}</td>
    {{#each prizeLoop prizes }}
      <td class="prize-cell">{{prize}}</td>
    {{/each}}
  </tr>
</template>

<template name="entries">
  <tr>
    <td colspan="2">Entries</td>
    <td colspan="8">
      {{#if hasItems}}
        <table class="table table-striped table-bordered">
          <tbody>
            {{#each entries}}
              {{> entry }}
            {{/each}}
            {{#if isAdmin}}
              {{> addEntry }}
            {{/if}}
          </tbody>
        </table>
      {{else}}
        <p>No entries for this tier</p>
      {{/if}}
    </td>
    <td></td>
  </tr>
</template>

<template name="entry">
  <tr>
    <td>{{userid}}</td>
    <td>{{amount}}</td>
  </tr>
</template>

<template name="addEntry">
  <tr>
    <td><form class="form-inline" role="form">
      <div class="form-group">
        <input type="text" name="name" id="name" value="" placeholder="Username" class="form-control" list="usernames"/>
        <datalist id="usernames">
          {{#each usernames }}
            <option label={{username}} value={{userId}}></option>
          {{/each}}
        </datalist>
        <button type="submit" class="btn btn-primary">Add</button>
      </div>
    </form></td>
    <td></td>
  </tr>
</template>